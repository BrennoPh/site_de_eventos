<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cadastre-se</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="form-page-container">
        <h1>Crie sua Conta</h1>
        <p class="muted" style="text-align: center; margin-top: -1.5rem; margin-bottom: 2rem;">
            Já tem uma conta? <a href="/login" style="color: var(--accent);">Faça o login</a>.
        </p>

        <div th:if="${erro}" style="color: #e74c3c; text-align: center; margin-bottom: 1rem;" th:text="${erro}"></div>

        <form action="/cadastro" method="POST">
            <div class="form-group">
                <label for="nome">Nome Completo</label>
                <input type="text" id="nome" name="nome" required>
            </div>
            <div class="form-group">
                <label for="email">Seu melhor email</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" name="cpf">
            </div>
            <div class="form-group">
                <label for="telefone">Telefone</label>
                <input type="tel" id="telefone" name="telefone">
            </div>
            <div class="form-group">
                <label for="dataNascimento">Data de Nascimento</label>
                <input type="date" id="dataNascimento" name="dataNascimento">
            </div>
            <div class="form-group">
                <label for="cidade">Cidade</label>
                <input type="text" id="cidade" name="cidade">
            </div>
            <div class="form-group">
                <label for="endereco">Endereço</label>
                <input type="text" id="endereco" name="endereco">
            </div>

            <hr style="border-color: var(--border); margin: 2rem 0;">

            <div class="form-group" style="display: flex; align-items: center; gap: 0.5rem;">
                <input type="checkbox" id="isOrganizador" name="isOrganizador" value="true" style="width: auto;" onchange="toggleOrganizadorFields()">
                <label for="isOrganizador" style="margin: 0;">Quero me cadastrar como Organizador de eventos</label>
            </div>

            <div id="organizadorFields" style="display: none;">
                <div class="form-group">
                    <label for="cnpj">CNPJ</label>
                    <input type="text" id="cnpj" name="cnpj">
                </div>
                <div class="form-group">
                    <label for="contaBancaria">Conta Bancária (para recebimento)</label>
                    <input type="text" id="contaBancaria" name="contaBancaria">
                </div>
            </div>
            
            <button type="submit" class="btn-accent" style="width:100%; margin-top: 1rem;">
                Criar Conta
            </button>
        </form>
    </div>

    <script>
        function toggleOrganizadorFields() {
            const checkbox = document.getElementById('isOrganizador');
            const organizadorFields = document.getElementById('organizadorFields');
            const cnpjInput = document.getElementById('cnpj');
            const contaBancariaInput = document.getElementById('contaBancaria');

            if (checkbox.checked) {
                organizadorFields.style.display = 'block';
                cnpjInput.required = true;
                contaBancariaInput.required = true;
            } else {
                organizadorFields.style.display = 'none';
                cnpjInput.required = false;
                contaBancariaInput.required = false;
                // Limpa os valores para não serem enviados
                cnpjInput.value = '';
                contaBancariaInput.value = '';
            }
        }
    </script>
</body>
</html>